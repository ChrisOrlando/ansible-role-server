---

# Playbook Defaults
backnet_host: "{{ inventory_hostname }}-int"

# Base Deps
kernelcare_included: true
epel_included: true

# NTP Defaults
ntp_included: true
ntp_timezone: "America/Detroit"
ntp_area: "north-america"

# Server Defaults
server_update: false
server_packages:
  - "iptables"
  - "iptables-services"
  - "emacs-nox"
  - "git"
  - "rsync"
  - "vim"
  - "mlocate"
  - "telnet"
  - "tcpdump"
  - "lynx"
  - "strace"
  - "nc"
  - "jq"
  - "pigz"
  - "unzip"
  - "bzip2"
  - "net-tools"
server_extra_packages: []
server_extra_path:
server_services_unused: []
server_adjust_limits: true
server_pam:
  nofile:
    soft: 999999
    hard: 999999
  nproc:
    soft: 999999
    hard: 999999
server_sysctl:
  - key: "net.core.somaxconn"
    value: 65535
  - key: "net.ipv4.ip_local_port_range"
    value: "10240 62000"
  - key: "fs.file-max"
    value: 999999
server_extra_sysctl: {}
server_ssh_known_hosts_command: "ssh-keyscan -H -T 10"
server_ssh_known_hosts_file: "/etc/ssh/ssh_known_hosts"
server_ssh_known_hosts:
  - "github.com"
server_bash_aliases: {}

# Firewall Defaults
firewall_included: true
firewall_v4_default_rules:
  001 default policies:
    - "-P INPUT ACCEPT"
    - "-P OUTPUT ACCEPT"
    - "-P FORWARD DROP"
  002 allow loopback:
    - "-A INPUT -i lo -s 127.0.0.0/8 -d 127.0.0.0/8 -j ACCEPT"
    - "-A INPUT -s {{ frontnet_addr | default('127.0.0.1') }} -j ACCEPT"
    - "-A INPUT -s {{ backnet_addr | default('127.0.0.1') }} -j ACCEPT"
  003 allow ping replies:
    - "-A INPUT -p icmp --icmp-type echo-request -j ACCEPT"
    - "-A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT"
  100 allow established related:
    - "-A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT"
  200 allow ssh:
    - "-A INPUT -p tcp --dport ssh -j ACCEPT"
  999 drop everything:
    - "-P INPUT DROP"
