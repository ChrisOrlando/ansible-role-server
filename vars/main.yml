---

# NTP Defaults
ntp_included: true
ntp_timezone: "America/Detroit"
ntp_area: "north-america"

# Default to open SSH
ssh_allow_list: "{{ nexcess_firewall_cidr_blocks | default({'office_and_vpn': ['0.0.0.0/0']}, true) }}"

# Firewall Defaults
firewall_v4_default_rules:
  001 default policies:
    - "-P INPUT ACCEPT"
    - "-P OUTPUT ACCEPT"
    - "-P FORWARD DROP"
  002 allow loopback:
    - "-A INPUT -i lo -s 127.0.0.0/8 -d 127.0.0.0/8 -j ACCEPT"
    - "-A INPUT -s {{ frontnet_addr | default('127.0.0.1', true) }} -j ACCEPT"
    - "-A INPUT -s {{ backnet_addr | default('127.0.0.1', true) }} -j ACCEPT"
  003 allow ping replies:
    - "-A INPUT -p icmp --icmp-type echo-request -j ACCEPT"
    - "-A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT"
  100 allow established related:
    - "-A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT"
  200 allow ssh:
    - "-A INPUT -p tcp -s {{ ssh_allow_list }} --dport ssh -j ACCEPT"
    - "-A INPUT -p tcp --dport ssh -j ACCEPT"
  999 drop everything:
    - "-P INPUT DROP"
